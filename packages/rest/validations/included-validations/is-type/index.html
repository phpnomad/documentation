<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="/public/assets/pico.min.css">
    <link rel="stylesheet" href="/public/assets/prism.css">
    <link rel="stylesheet" href="/public/assets/style.css">
    <script src="/public/assets/prism.js"></script>
</head>
<body>
<header>
    <nav>
    <a href="https://www.github.com/phpnomad">GitHub</a>
</nav></header>

<div class="docs-layout">
    <aside class="docs-sidebar">
                    <a href="/"><img src="/public/assets/logo.png" alt="PHPNomad Logo"/></a>
            <nav>
    
                                        <details class="nav-section" >
                    <summary>
                                                    Core concepts
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" >
                    <summary>
                                                    Bootstrapping
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/advanced-bootstrapping" class="">
                        Advanced bootstrapping
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/creating-and-managing-initializers" class="">
                        Creating and managing initializers
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/platform-integrations" class="">
                        Platform integrations
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Initializers
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/event-binding" class="">
                        Event binding
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/event-listeners" class="">
                        Event listeners
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/facades" class="">
                        Facades
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/rest-controllers" class="">
                        Rest controllers
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" open>
                    <summary>
                                                    Packages
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" open>
                    <summary>
                                                    Rest
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/controllers" class="">
                        Controllers
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/integration-guide" class="">
                        Integration guide
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Interceptors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/interceptors/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Included interceptors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/interceptors/included-interceptors/event-interceptor" class="">
                        Event interceptor
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" >
                    <summary>
                                                    Middleware
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/middleware/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Included middleware
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/callback-middleware" class="">
                        Callback middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/parse-jwt-middleware" class="">
                        Parse jwt middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/set-type-middleware" class="">
                        Set type middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/validation-middleware" class="">
                        Validation middleware
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" open>
                    <summary>
                                                    Validations
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/validations/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/validation-set" class="">
                        Validation set
                    </a>
                </div>
                                                <details class="nav-section" open>
                    <summary>
                                                    Included validations
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-any" class="">
                        Is any
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-email" class="">
                        Is email
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-greater-than" class="">
                        Is greater than
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-numeric" class="">
                        Is numeric
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-type" class="">
                        Is type
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/keys-are-any" class="">
                        Keys are any
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" >
                    <summary>
                                                    Utils
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/utils/array-helper" class="">
                        Array helper
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Processors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/utils/processors/array-processor" class="">
                        Array processor
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/utils/processors/list-filter" class="">
                        List filter
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/utils/processors/list-sorter" class="">
                        List sorter
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
</nav>            </aside>
    <main class="docs-content">
            <h1 id="istype">IsType</h1>
<p>The <code>IsType</code> validation ensures that a request parameter matches a specific <strong>basic type</strong>.
It supports the built-in <code>BasicTypes</code> enumeration, covering common cases
like <code>Integer</code>, <code>Float</code>, <code>Boolean</code>, <code>String</code>, <code>Array</code>, <code>Object</code>, and <code>Null</code>.</p>
<p>This validation is particularly useful for APIs that need to guarantee type safety before controller logic executes.</p>
<h2 id="class-definition">Class Definition</h2>
<pre><code class="language-php">namespace PHPNomad\Rest\Validations;

use PHPNomad\Rest\Interfaces\Validation;
use PHPNomad\Rest\Traits\WithProvidedErrorMessage;
use PHPNomad\Http\Interfaces\Request;
use PHPNomad\Rest\Enums\BasicTypes;

class IsType implements Validation
</code></pre>
<h2 id="usage-in-a-controller">Usage in a Controller</h2>
<p>Here’s an example endpoint that requires an integer <code>userId</code> and a boolean <code>isActive</code> flag. Both fields are validated
before the controller runs:</p>
<pre><code class="language-php">&lt;?php

use PHPNomad\Http\Enums\Method;
use PHPNomad\Http\Interfaces\Request;
use PHPNomad\Http\Interfaces\Response;

use PHPNomad\Rest\Interfaces\Controller;
use PHPNomad\Rest\Interfaces\HasValidations;
use PHPNomad\Rest\Interfaces\HasMiddleware;

use PHPNomad\Rest\Factories\ValidationSet;
use PHPNomad\Rest\Middleware\ValidationMiddleware;
use PHPNomad\Rest\Middleware\SetTypeMiddleware;
use PHPNomad\Rest\Validations\IsType;
use PHPNomad\Rest\Enums\BasicTypes;

final class UpdateUserStatus implements Controller, HasValidations, HasMiddleware
{
    public function __construct(private Response $response, private UserService $users) {}

    public function getEndpoint(): string { return '/users/{userId}/status'; }
    public function getMethod(): string   { return Method::Post; }

    public function getResponse(Request $request): Response
    {
        // At this point, inputs passed validation.
        // userId was coerced to int by middleware, isActive validated strictly and we cast now.
        $id       = (int)  $request-&gt;getParam('userId');
        $isActive = (bool) $request-&gt;getParam('isActive');

        $this-&gt;users-&gt;setActiveStatus($id, $isActive);

        return $this-&gt;response
            -&gt;setStatus(200)
            -&gt;setJson(['id' =&gt; $id, 'isActive' =&gt; $isActive]);
    }

    /** Declare validations for each field */
    public function getValidations(): array
    {
        return [
            'userId' =&gt; (new ValidationSet())
                -&gt;setRequired()
                -&gt;addValidation(fn() =&gt; new IsType(BasicTypes::Integer)),

            // IMPORTANT: Do not coerce first; let IsType(Boolean) validate the literal input.
            'isActive' =&gt; (new ValidationSet())
                -&gt;setRequired()
                -&gt;addValidation(fn() =&gt; new IsType(BasicTypes::Boolean)),
        ];
    }

    /** Compose middleware: coerce userId to int, then run validations */
    public function getMiddleware(Request $request): array
    {
        return [
            new SetTypeMiddleware('userId', BasicTypes::Integer),
            // Validation must come after any coercion middleware.
            new ValidationMiddleware($this),
        ];
    }
}
</code></pre>
<h2 id="error-type-and-context">Error Type and Context</h2>
<ul>
<li>
<p><strong>Type:</strong> <code>INVALID_TYPE</code></p>
</li>
<li>
<p><strong>Error Message:</strong></p>
<pre><code>userId must be an Integer, was given abc
</code></pre>
</li>
<li>
<p><strong>Context:</strong></p>
<pre><code class="language-json">{
  &quot;requiredType&quot;: &quot;Integer&quot;
}
</code></pre>
</li>
</ul>
<h2 id="example-failure-response">Example Failure Response</h2>
<p>If the client passes <code>&quot;userId&quot;: &quot;abc&quot;</code> and <code>&quot;isActive&quot;: &quot;yes&quot;</code>, the response might look like this:</p>
<pre><code class="language-json">{
  &quot;error&quot;: {
    &quot;message&quot;: &quot;Validations failed.&quot;,
    &quot;context&quot;: {
      &quot;userId&quot;: [
        {
          &quot;field&quot;: &quot;userId&quot;,
          &quot;message&quot;: &quot;userId must be a Integer, was given abc&quot;,
          &quot;type&quot;: &quot;INVALID_TYPE&quot;,
          &quot;context&quot;: {
            &quot;requiredType&quot;: &quot;Integer&quot;
          }
        }
      ],
      &quot;isActive&quot;: [
        {
          &quot;field&quot;: &quot;isActive&quot;,
          &quot;message&quot;: &quot;isActive must be a Boolean, was given yes&quot;,
          &quot;type&quot;: &quot;INVALID_TYPE&quot;,
          &quot;context&quot;: {
            &quot;requiredType&quot;: &quot;Boolean&quot;
          }
        }
      ]
    }
  }
}
</code></pre>
<p>Absolutely — great idea to show <strong>type coercion + validation together</strong>. One nuance: coercing <strong>booleans</strong>
with <code>settype()</code> can accidentally turn any non-empty string into <code>true</code>. So in the example below we **coerce the integer
** (<code>userId</code>) with <code>SetTypeMiddleware</code>, but we <strong>do not</strong> coerce the boolean (<code>isActive</code>) before validation; we
let <code>IsType(Boolean)</code> validate strings like <code>&quot;true&quot;</code>, <code>&quot;false&quot;</code>, <code>&quot;1&quot;</code>, <code>&quot;0&quot;</code> strictly.</p>
<p>Here’s an updated section you can drop into the <strong><code>IsType</code></strong> docs.</p>
<hr />
<h2 id="using-istype-with-middleware-coercion--validation">Using <code>IsType</code> with Middleware (coercion + validation)</h2>
<p>Below, the endpoint requires:</p>
<ul>
<li><code>userId</code>: an <strong>integer</strong> (coerced by middleware, then validated)</li>
<li><code>isActive</code>: a <strong>boolean</strong> (validated strictly, then cast in the controller)</li>
</ul>
<pre><code class="language-php">&lt;?php

use PHPNomad\Http\Enums\Method;
use PHPNomad\Http\Interfaces\Request;
use PHPNomad\Http\Interfaces\Response;

use PHPNomad\Rest\Interfaces\Controller;
use PHPNomad\Rest\Interfaces\HasValidations;
use PHPNomad\Rest\Interfaces\HasMiddleware;

use PHPNomad\Rest\Factories\ValidationSet;
use PHPNomad\Rest\Middleware\ValidationMiddleware;
use PHPNomad\Rest\Middleware\SetTypeMiddleware;
use PHPNomad\Rest\Validations\IsType;
use PHPNomad\Rest\Enums\BasicTypes;

final class UpdateUserStatus implements Controller, HasValidations, HasMiddleware
{
    public function __construct(private Response $response, private UserService $users) {}

    public function getEndpoint(): string { return '/users/{userId}/status'; }
    public function getMethod(): string   { return Method::Post; }

    public function getResponse(Request $request): Response
    {
        // At this point, inputs passed validation.
        // userId was coerced to int by middleware, isActive validated strictly and we cast now.
        $id       = (int)  $request-&gt;getParam('userId');
        $isActive = (bool) $request-&gt;getParam('isActive');

        $this-&gt;users-&gt;setActiveStatus($id, $isActive);

        return $this-&gt;response
            -&gt;setStatus(200)
            -&gt;setJson(['id' =&gt; $id, 'isActive' =&gt; $isActive]);
    }

    /** Declare validations for each field */
    public function getValidations(): array
    {
        return [
            'userId' =&gt; (new ValidationSet())
                -&gt;setRequired()
                -&gt;addValidation(fn() =&gt; new IsType(BasicTypes::Integer)),

            // IMPORTANT: Do not coerce first; let IsType(Boolean) validate the literal input.
            'isActive' =&gt; (new ValidationSet())
                -&gt;setRequired()
                -&gt;addValidation(fn() =&gt; new IsType(BasicTypes::Boolean)),
        ];
    }

    /** Compose middleware: coerce userId to int, then run validations */
    public function getMiddleware(Request $request): array
    {
        return [
            new SetTypeMiddleware('userId', BasicTypes::Integer),
            new ValidationMiddleware($this),
        ];
    }
}
</code></pre>
<ul>
<li><code>userId</code>: coercion is safe (<code>&quot;42&quot;</code> → <code>42</code>) and avoids repeating casts in your controller.</li>
<li><code>isActive</code>: coercing <strong>before</strong> validating would turn <em>any</em> non-empty string into <code>true</code>. By <strong>validating first</strong>
with <code>IsType(Boolean)</code>, values like <code>&quot;true&quot;</code>, <code>&quot;false&quot;</code>, <code>&quot;1&quot;</code>, <code>&quot;0&quot;</code>, <code>&quot;yes&quot;</code>, <code>&quot;no&quot;</code> are accepted; nonsense
strings (e.g., <code>&quot;perhaps&quot;</code>) are rejected. After validation passes, casting to <code>(bool)</code> in the controller is safe and
intentional.</li>
</ul>
<h3 id="example-request-success">Example request (success)</h3>
<pre><code>POST /users/42/status
Content-Type: application/json

{ &quot;isActive&quot;: &quot;true&quot; }
</code></pre>
<pre><code class="language-json">{
  &quot;id&quot;: 42,
  &quot;isActive&quot;: true
}
</code></pre>
<h3 id="example-request-failure">Example request (failure)</h3>
<pre><code>POST /users/42/status
Content-Type: application/json

{ &quot;isActive&quot;: &quot;perhaps&quot; }
</code></pre>
<pre><code class="language-json">{
  &quot;error&quot;: {
    &quot;message&quot;: &quot;Validations failed.&quot;,
    &quot;context&quot;: {
      &quot;isActive&quot;: [
        {
          &quot;field&quot;: &quot;isActive&quot;,
          &quot;message&quot;: &quot;isActive must be a Boolean, was given perhaps&quot;,
          &quot;type&quot;: &quot;INVALID_TYPE&quot;,
          &quot;context&quot;: {
            &quot;requiredType&quot;: &quot;Boolean&quot;
          }
        }
      ]
    }
  }
}
</code></pre>

    </main>
</div>

<footer>
    <p class="mod--center">These docs were built with <a href="https://www.github.com/phpnomad/documentation">a static site generator that was made with PHPNomad.</a></p>
<small class="mod--center">Made and maintained by the people at <a href="https://www.novatori.us">Novatorius</a>. <em>Mente Nova!</em></small></footer>
</body>
</html>

