<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="/public/assets/pico.min.css">
    <link rel="stylesheet" href="/public/assets/prism.css">
    <link rel="stylesheet" href="/public/assets/style.css">
    <script src="/public/assets/prism.js"></script>
</head>
<body>
<header>
    <nav>
    <a href="https://www.github.com/phpnomad">GitHub</a>
</nav></header>

<div class="docs-layout">
    <aside class="docs-sidebar">
                    <a href="/"><img src="/public/assets/logo.png" alt="PHPNomad Logo"/></a>
            <nav>
    
                                        <details class="nav-section" >
                    <summary>
                                                    Core concepts
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" >
                    <summary>
                                                    Bootstrapping
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/advanced-bootstrapping" class="">
                        Advanced bootstrapping
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/creating-and-managing-initializers" class="">
                        Creating and managing initializers
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Initializers
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/event-binding" class="">
                        Event binding
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/event-listeners" class="">
                        Event listeners
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/facades" class="">
                        Facades
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/rest-controllers" class="">
                        Rest controllers
                    </a>
                </div>
                        
                    </div>
                </details>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/platform-integrations" class="">
                        Platform integrations
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" open>
                    <summary>
                                                    Packages
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" open>
                    <summary>
                                                    Rest
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/controllers" class="">
                        Controllers
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/integration-guide" class="">
                        Integration guide
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Interceptors
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" >
                    <summary>
                                                    Included interceptors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/interceptors/included-interceptors/event-interceptor" class="">
                        Event interceptor
                    </a>
                </div>
                        
                    </div>
                </details>
                                                <div class="nav-item">
                    <a href="/packages/rest/interceptors/introduction" class="">
                        Introduction
                    </a>
                </div>
                        
                    </div>
                </details>
                                                <div class="nav-item">
                    <a href="/packages/rest/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Middleware
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" >
                    <summary>
                                                    Included middleware
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/callback-middleware" class="">
                        Callback middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/parse-jwt-middleware" class="">
                        Parse jwt middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/set-type-middleware" class="">
                        Set type middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/validation-middleware" class="">
                        Validation middleware
                    </a>
                </div>
                        
                    </div>
                </details>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/introduction" class="">
                        Introduction
                    </a>
                </div>
                        
                    </div>
                </details>
                                                <details class="nav-section" open>
                    <summary>
                                                    Validations
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" >
                    <summary>
                                                    Included validations
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-any" class="">
                        Is any
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-email" class="">
                        Is email
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-greater-than" class="">
                        Is greater than
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-numeric" class="">
                        Is numeric
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-type" class="">
                        Is type
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/keys-are-any" class="">
                        Keys are any
                    </a>
                </div>
                        
                    </div>
                </details>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/validation-set" class="">
                        Validation set
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" >
                    <summary>
                                                    Utils
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/utils/array-helper" class="">
                        Array helper
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Processors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/utils/processors/array-processor" class="">
                        Array processor
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/utils/processors/list-filter" class="">
                        List filter
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/utils/processors/list-sorter" class="">
                        List sorter
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
</nav>            </aside>
    <main class="docs-content">
            <h1 id="validationset">ValidationSet</h1>
<p>A <code>ValidationSet</code> is the way you declare validations for a single field in PHPNomad.<br />
It acts as a container for one or more validation rules and knows whether the field is required.</p>
<p>When <code>ValidationMiddleware</code> runs, it asks each <code>ValidationSet</code> to evaluate the incoming request and collect any
failures. This keeps validations <strong>declarative and composable</strong>: controllers don’t run checks inline, they simply return
an array of validation sets.</p>
<h2 id="purpose">Purpose</h2>
<p>Instead of scattering <code>if</code> statements around your controller code, a <code>ValidationSet</code> lets you declare:</p>
<ul>
<li>Whether the field is <strong>required</strong>.</li>
<li>What rules must be applied to the field (via <code>addValidation</code>).</li>
<li>How failures should be collected and described.</li>
</ul>
<p>This makes the input contract explicit, testable, and reusable.</p>
<h2 id="api">API</h2>
<h3 id="addvalidationclosure-validationgetter"><code>addValidation(Closure $validationGetter)</code></h3>
<p>Adds a validation to the set.<br />
The closure should return a <code>Validation</code> instance when called.</p>
<pre><code class="language-php">$set = (new ValidationSet())
    -&gt;addValidation(fn() =&gt; new IsInteger())
    -&gt;addValidation(fn() =&gt; new MinValue(1));
</code></pre>
<h3 id="setrequiredbool-isrequired--true"><code>setRequired(bool $isRequired = true)</code></h3>
<p>Marks the field as required.
If the field is missing, the set automatically produces a “required” failure, without needing a separate validation.</p>
<pre><code class="language-php">$set = (new ValidationSet())
    -&gt;setRequired()
    -&gt;addValidation(fn() =&gt; new IsString());
</code></pre>
<h2 id="example">Example</h2>
<p>Here’s how you might declare validations for a <code>username</code> field in a controller:</p>
<pre><code class="language-php">use PHPNomad\Rest\Factories\ValidationSet;
use App\Validations\IsNotReservedUsername;

public function getValidations(): array
{
    return [
        'username' =&gt; (new ValidationSet())
            -&gt;setRequired()
            -&gt;addValidation(fn() =&gt; new IsString())
            -&gt;addValidation(fn() =&gt; new MinLength(3))
            -&gt;addValidation(fn() =&gt; new IsNotReservedUsername()),
    ];
}
</code></pre>
<p>If the request payload is missing <code>username</code>, the set will automatically produce a “required” failure.
If it’s present but invalid, all failing rules will be collected and returned.</p>
<h2 id="example-failure-response">Example failure response</h2>
<p>When <code>ValidationMiddleware</code> runs and finds validation failures, it throws a <code>ValidationException</code>. The framework catches
this and generates a structured error response. Errors are grouped by field, with each failure including a message,
type, and context.</p>
<p>This means that clients can see all problems at once and handle them intelligently.</p>
<pre><code class="language-json">{
  &quot;error&quot;: {
    &quot;message&quot;: &quot;Validations failed.&quot;,
    &quot;context&quot;: {
      &quot;username&quot;: [
        {
          &quot;field&quot;: &quot;username&quot;,
          &quot;message&quot;: &quot;username is required.&quot;,
          &quot;type&quot;: &quot;REQUIRED&quot;
        }
      ],
      &quot;email&quot;: [
        {
          &quot;field&quot;: &quot;email&quot;,
          &quot;message&quot;: &quot;Must be a valid email address.&quot;,
          &quot;type&quot;: &quot;invalid_email&quot;,
          &quot;context&quot;: {
            &quot;value&quot;: &quot;not-an-email&quot;
          }
        }
      ],
      &quot;password&quot;: [
        {
          &quot;field&quot;: &quot;password&quot;,
          &quot;message&quot;: &quot;Must be at least 12 characters.&quot;,
          &quot;type&quot;: &quot;min_length&quot;,
          &quot;context&quot;: {
            &quot;min&quot;: 12,
            &quot;actual&quot;: 7
          }
        },
        {
          &quot;field&quot;: &quot;password&quot;,
          &quot;message&quot;: &quot;Must include at least one number.&quot;,
          &quot;type&quot;: &quot;pattern_missing_digit&quot;
        }
      ]
    }
  }
}
</code></pre>
<h2 id="best-practices">Best Practices</h2>
<ul>
<li><strong>Always use <code>setRequired()</code> for required fields</strong> — don’t reinvent the “is required” check in a custom validation.</li>
<li><strong>Compose multiple rules</strong> in a single set; don’t build monolithic validators.</li>
<li><strong>Favor closures over instances</strong> when adding validations — they’re cached automatically and won’t bloat memory.</li>
<li><strong>Keep error messages clear</strong> — client developers should be able to act on them without guesswork.</li>
</ul>

    </main>
</div>

<footer>
    <p class="mod--center">These docs were built with <a href="https://www.github.com/phpnomad/documentation">a static site generator that was made with PHPNomad.</a></p>
<small class="mod--center">Made and maintained by the people at <a href="https://www.novatori.us">Novatorius</a>. <em>Mente Nova!</em></small></footer>
</body>
</html>

