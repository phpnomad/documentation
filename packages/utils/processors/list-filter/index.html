<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="/public/assets/pico.min.css">
    <link rel="stylesheet" href="/public/assets/prism.css">
    <link rel="stylesheet" href="/public/assets/style.css">
    <script src="/public/assets/prism.js"></script>
</head>
<body>
<header>
    <nav>
    <a href="https://www.github.com/phpnomad">GitHub</a>
</nav></header>

<div class="docs-layout">
    <aside class="docs-sidebar">
                    <a href="/"><img src="/public/assets/logo.png" alt="PHPNomad Logo"/></a>
            <nav>
    
                                        <details class="nav-section" >
                    <summary>
                                                    Core concepts
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" >
                    <summary>
                                                    Bootstrapping
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/advanced-bootstrapping" class="">
                        Advanced bootstrapping
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/creating-and-managing-initializers" class="">
                        Creating and managing initializers
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/platform-integrations" class="">
                        Platform integrations
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Initializers
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/event-binding" class="">
                        Event binding
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/event-listeners" class="">
                        Event listeners
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/facades" class="">
                        Facades
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/core-concepts/bootstrapping/initializers/rest-controllers" class="">
                        Rest controllers
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" open>
                    <summary>
                                                    Packages
                                            </summary>
                    <div class="nav-group">
                                                            <details class="nav-section" >
                    <summary>
                                                    Rest
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/controllers" class="">
                        Controllers
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/integration-guide" class="">
                        Integration guide
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Interceptors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/interceptors/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Included interceptors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/interceptors/included-interceptors/event-interceptor" class="">
                        Event interceptor
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" >
                    <summary>
                                                    Middleware
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/middleware/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Included middleware
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/callback-middleware" class="">
                        Callback middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/parse-jwt-middleware" class="">
                        Parse jwt middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/set-type-middleware" class="">
                        Set type middleware
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/middleware/included-middleware/validation-middleware" class="">
                        Validation middleware
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" >
                    <summary>
                                                    Validations
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/validations/introduction" class="">
                        Introduction
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/validation-set" class="">
                        Validation set
                    </a>
                </div>
                                                <details class="nav-section" >
                    <summary>
                                                    Included validations
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-any" class="">
                        Is any
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-email" class="">
                        Is email
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-greater-than" class="">
                        Is greater than
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-numeric" class="">
                        Is numeric
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/is-type" class="">
                        Is type
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/rest/validations/included-validations/keys-are-any" class="">
                        Keys are any
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                                                <details class="nav-section" open>
                    <summary>
                                                    Utils
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/utils/array-helper" class="">
                        Array helper
                    </a>
                </div>
                                                <details class="nav-section" open>
                    <summary>
                                                    Processors
                                            </summary>
                    <div class="nav-group">
                                                            <div class="nav-item">
                    <a href="/packages/utils/processors/array-processor" class="">
                        Array processor
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/utils/processors/list-filter" class="">
                        List filter
                    </a>
                </div>
                                                <div class="nav-item">
                    <a href="/packages/utils/processors/list-sorter" class="">
                        List sorter
                    </a>
                </div>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
                    </div>
                </details>
                        
</nav>            </aside>
    <main class="docs-content">
            <h1 id="list-filter">List Filter</h1>
<p>A list filter makes it possible to filter items from an array of objects using a chain-able query syntax. This feature
is built-into <a href="/reference/registries/object-registries">Object Registries</a> via the <code>ObjectRegistry::query</code> method,
however it can also be used on raw arrays, as long as each item in the array has the same getters and setters you're
filtering by. This can be done using fully-qualified objects, or by simply converting arrays to objects, as shown below.</p>
<pre><code class="language-php">use \PHPNomad\Helpers\Processors\ListFilter;

$iceCreamOrderItems = [
  'item_1' =&gt; (object) [
      'customer' =&gt; (object)['name' =&gt; 'Alex', 'id' =&gt; 1],
      'scoops' =&gt; ['strawberry','chocolate'],
      'cone' =&gt; 'waffle',
      'price' =&gt; 629,
      'toppings' =&gt; ['cheese-crackers']
  ],
  
  'item_2' =&gt; (object) [
      'customer' =&gt; (object)['name' =&gt; 'Devin', 'id' =&gt; 2],
      'scoops' =&gt; ['chocolate'],
      'cone' =&gt; 'chocolateWaffle',
      'price' =&gt; 429,
      'toppings' =&gt; ['sprinkles']
  ],
  
  'item_3' =&gt; (object) [
      'customer' =&gt; (object)['name' =&gt; 'Kate', 'id' =&gt; 3],
      'scoops' =&gt; ['vanilla'],
      'cone' =&gt; 'basic',
      'price' =&gt; 429,
      'toppings' =&gt; []
  ],
  
  'item_4' =&gt; (object) [
      'customer' =&gt; (object)['name' =&gt; 'Ben', 'id' =&gt; 4],
      'scoops' =&gt; ['strawberry','chocolate', 'vanilla'], 
      'cone' =&gt; 'bowl',
      'price' =&gt; 899,
      'toppings' =&gt; ['sprinkles']
  ],
];
</code></pre>
<h2 id="action">Action</h2>
<p>An action applies the set of operations against the array, and provides a result in different ways based on the type of
action made.</p>
<h3 id="filter-action">Filter Action</h3>
<p>The filter action will return a filtered array of items, filtering the results based on the provided criteria in the
operations chained before the call.</p>
<pre><code class="language-php">// [1,2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;lessThan('price', 600)-&gt;filter();
</code></pre>
<h3 id="find-action">Find Action</h3>
<p>The find action will return the first item found based on the provided criteria in the operations chained before the
call.</p>
<pre><code class="language-php">// Returns item 1 in the array above
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;equals('customer.id', 2)-&gt;find();
</code></pre>
<h2 id="operations">Operations</h2>
<p>An operation is a single specification on how to filter the items in the array. Operations can be chained together, and
will set multiple operations against the filter.</p>
<p>Operations are not applied until either <code>filter</code> or <code>find</code> is called, and the operations run in the order they're
declared.</p>
<pre><code class="language-php">// [1]
$filtered = (new ListFilter($iceCreamOrderItems))
  -&gt;greaterThan('price',629)
  -&gt;lessThan('price', 899)
  -&gt;in('toppings','sprinkles')
  -&gt;filter();
</code></pre>
<h3 id="numeric-operations">Numeric Operations</h3>
<p>It's possible to filter numbers based on their value using <code>lessThan</code>, <code>greaterThan</code>, <code>lessThanOrEqual</code>,
and <code>greaterThanOrEqual</code>.</p>
<pre><code class="language-php">// [1,2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;lessThan('price', 600)-&gt;filter();
// [1,2,3]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;greaterThan('price', 400)-&gt;filter();
// [1,2,3]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;greaterThanOrEqual('price', 429)-&gt;filter();
// [0,1,2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;lessThanOrEqual('price', 429)-&gt;filter();
</code></pre>
<h3 id="instance-operations">Instance Operations</h3>
<p>It's possible to filter values based on their instance type. Naturally, this requires that the items in-question are an
actual instance. These filters work with the class, as well as any class that they inherit.</p>
<pre><code class="language-php">interface Content{}

interface Article{}

class BlogPost implements Content, Article{
  /*..*/
}

class MicroPost implements Content, Article{
  /*..*/
}

class Comment implements Content{
  /*..*/
}

$posts = [new BlogPost(),new BlogPost(), new MicroPost(), new Comment()];

// [0,1]
$filtered = (new \PHPNomad\Helpers\Processors\ListFilter($posts))-&gt;instanceOf(BlogPost::class);
// [0,1,2]
$filtered = (new \PHPNomad\Helpers\Processors\ListFilter($posts))-&gt;instanceOf(Article::class);
// [0,1,3]
$filtered = (new \PHPNomad\Helpers\Processors\ListFilter($posts))-&gt;notInstanceOf(MicroPost::class); 
// [3]
$filtered = (new \PHPNomad\Helpers\Processors\ListFilter($posts))-&gt;notInstanceOf(Article::class); 
// [0,1,2]
$filtered = (new \PHPNomad\Helpers\Processors\ListFilter($posts))-&gt;hasAllInstances(Content::class, Article::class);
// [2,3]
$filtered = (new \PHPNomad\Helpers\Processors\ListFilter($posts))-&gt;hasAnyInstances(MicroPost::class, Comment::class);   
</code></pre>
<h3 id="key-operations">Key Operations</h3>
<p>These filters work against the array key instead of the array value.</p>
<pre><code class="language-php">// [1,2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;keyIn('item_2', 'item_3')-&gt;filter();
// [0,3]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;keyNotIn('item_2', 'item_3')-&gt;filter();
</code></pre>
<h3 id="value-operations">Value Operations</h3>
<p>Value operations work directly against the various property values on the objects inside the array. In order for any
value operation to work, the property must either be <code>public</code> (<code>readonly</code> is okay!), or has an associated getter method
called <code>get_${property}</code> where <code>${property}</code> is the name of the property that must be fetched. The getter method takes
priority over the property value, so if you have a getter and a public property, it will use the getter method.</p>
<p>All value operations support dot notation for fetching values nested in objects, and can work with both arrays of
values, and single values.</p>
<h4 id="in-not-in">In, Not-In</h4>
<p><code>in</code> will set the query to filter out items whose field any of the provided values. <code>notIn</code> does the exact opposite.</p>
<pre><code class="language-php">// [0,2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;in('cone', 'basic','waffle')-&gt;filter();
// [1,3]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;in('toppings', 'sprinkles')-&gt;filter();
// [0,1,3]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;in('toppings', 'sprinkles', 'cheese-crackers')-&gt;filter();
// [0,2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;notIn('toppings', 'sprinkles')-&gt;filter();
// [2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;notIn('toppings', 'sprinkles', 'cheese-crackers')-&gt;filter();
// [3]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;in('customer.name','Ben')-&gt;filter();
</code></pre>
<h4 id="and">And</h4>
<p>Sets the query to filter out items whose field has all the provided values.</p>
<pre><code class="language-php">// [0,3]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;and('scoops', 'strawberry','chocolate')-&gt;filter();
</code></pre>
<h4 id="equals">Equals</h4>
<p>Sets the query to filter out items whose value is not identical to the provided value.</p>
<pre><code class="language-php">// [1,2]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;and('price', 429)-&gt;filter();
// [0]
$filtered = (new ListFilter($iceCreamOrderItems))-&gt;and('scoops', ['strawberry','chocolate'])-&gt;filter();
</code></pre>
<h3 id="callback">Callback</h3>
<p>If all-else fails, you can chain in a callback to filter items. The example below would filter out any item whose cone
type does not begin with the letter 'b':</p>
<pre><code class="language-php">// [2,3]
$filtered = (new ListFilter($iceCreamOrderItems))
    -&gt;filterFromCallback('cone', fn(string $cone) =&gt; 0 === strpos($cone,'b'))
    -&gt;filter();
</code></pre>
<h2 id="seeding">Seeding</h2>
<p>The concrete <code>ListFilter</code> class can be seeded directly, using an array. This can be done both with the enums, and
without. The enum is the preferred method, but if you're confident that the input is accurate, you can technically use
an array directly. This can be useful in scenarios such as directly querying a registry using a REST endpoint, or
something like that.</p>
<pre><code class="language-php">use PHPNomad\Enums\Filter;

// Using Enums
ListFilter::seed($iceCreamOrderItems, [
    Filter::in-&gt;field('cone')            =&gt; ['waffle', 'chocolateWaffle'],
    Filter::greaterThan-&gt;field('price') =&gt; 429,
])-&gt;filter()

// Raw query
ListFilter::seed($iceCreamOrderItems, [
    'cone_In'            =&gt; ['waffle', 'chocolateWaffle'],
    'price_GreaterThan' =&gt; 429,
])-&gt;filter()
</code></pre>

    </main>
</div>

<footer>
    <p class="mod--center">These docs were built with <a href="https://www.github.com/phpnomad/documentation">a static site generator that was made with PHPNomad.</a></p>
<small class="mod--center">Made and maintained by the people at <a href="https://www.novatori.us">Novatorius</a>. <em>Mente Nova!</em></small></footer>
</body>
</html>

